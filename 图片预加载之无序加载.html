<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8">
		<title></title>
		<style type="text/css">
			body,html{ height: 100%;}
			*{ padding: 0; margin: 0; list-style: none;}
			.box{ text-align: center; margin: 100px auto;}
			.box img{ width: 1200px; height: 675px;}
			.btn{ display: inline-block; height: 30px; line-height: 30px; width: 100px;}
			.loading{ position: fixed; width: 100%; height: 100%; top: 0; left: 0; text-align: center; font-size: 35px; background: #e5e5e5;}
			.progress{ margin-top: 300px;}
		</style>
	</head>
	<body>
		<div class="box">
			<img id="img" title="" src="http://bizhi.zhuoku.com/2015/06/02/zhuoku/ZHUOKU116.jpg" />
			<p>
				<a href="javascript:;" class="btn" data-control="prev">上一张</a>
				<a href="javascript:;" class="btn" data-control="next">下一张</a>
			</p>
		</div>
		<div class="loading">
			<p  class="progress">0%</p>
		</div>
		<script type="text/javascript" src="js/jquery.js" ></script>
		<script type="text/javascript" src="js/perload.js" ></script>
		<script type="text/javascript">
			var imgs=['http://bizhi.zhuoku.com/2015/06/02/zhuoku/ZHUOKU116.jpg',
					  'http://bizhi.zhuoku.com/2014/02/11/zhuoku/shiweinu341.jpg',
					  'http://bizhi.zhuoku.com/2013/04/07/zhuoku/zhuoku040.jpg',
					  'http://bizhi.zhuoku.com/2013/07/08/zhuoku/zhuoku215.jpg',
					  'http://img2.niutuku.com/1312/0820/0820-niutuku.com-27871.jpg',
					  'http://pic1.win4000.com/wallpaper/b/5847bd0f6b61f.jpg',
					  'http://bizhi.zhuoku.com/2011/05/12/jingxuan/Jingxuan022.jpg',
					  'http://img2.niutuku.com/desk/1208/1524/ntk-1524-33021.jpg',
					  'http://bizhi.zhuoku.com/2013/07/25/zhuoku/zhuoku123.jpg'];
			var index=0,
				length=imgs.length,
				$progress=$('.progress');
			$.PreLoad(imgs,{
				each:function(count){
					$progress.html(Math.round((count+1)/length*100)+'%');
				},
				all:function(){
					$('.loading').hide();
				}
			});
			$('.btn').on('click',function(){
				if($(this).data('control')==='prev'){
					index--;
					if(index<0){
						index==0;
					}
					//index=Math.max(0,--index);
				}else{
					index=Math.min(length-1,++index);
				}
				document.title=(index+1)+'/'+length;
				$('#img').attr('src',imgs[index])
			});




//			var imgs=['http://bizhi.zhuoku.com/2015/06/02/zhuoku/ZHUOKU116.jpg',
//					  'http://bizhi.zhuoku.com/2014/02/11/zhuoku/shiweinu341.jpg',
//					  'http://bizhi.zhuoku.com/2013/04/07/zhuoku/zhuoku040.jpg',
//					  'http://bizhi.zhuoku.com/2013/07/08/zhuoku/zhuoku215.jpg',
//					  'http://img2.niutuku.com/1312/0820/0820-niutuku.com-27871.jpg',
//					  'http://pic1.win4000.com/wallpaper/b/5847bd0f6b61f.jpg',
//					  'http://bizhi.zhuoku.com/2011/05/12/jingxuan/Jingxuan022.jpg',
//					  'http://img2.niutuku.com/desk/1208/1524/ntk-1524-33021.jpg',
//					  'http://bizhi.zhuoku.com/2013/07/25/zhuoku/zhuoku123.jpg'];
//			var index=0,
//				length=imgs.length,
//				count=0,
//				$progress=$('.progress');	
//			$.each(imgs, function(index,src){
//				var imgobj=new Image();
//				$(imgobj).on('load',function(){
//					$progress.html(Math.round((count+1)/length*100)+'%');
//					if(count>=length-1){
//						$('.loading').hide();
//					};
//					count++;
//				});
//				imgobj.src=src;
//			});
//			$('.btn').on('click',function(){
//				if($(this).data('control')==='prev'){
//					index--;
//					if(index<0){
//						index==0;
//					}
//					//index=Math.max(0,--index);
//				}else{
//					index=Math.min(length-1,++index);
//				}
//				document.title=(index+1)+'/'+length;
//				$('#img').attr('src',imgs[index])
//			});
		</script>
	</body>
</html>
